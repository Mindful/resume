\documentclass[10pt,a4paper]{article}

\usepackage{tikz}
\usepackage{CJKutf8}
\usepackage[utf8]{inputenc}	%utf8  to build from any machine
\usepackage[a4paper]{geometry} %define page styles using geometry	
\usepackage{tcolorbox}
\usepackage{color}
\usepackage{enumitem}
\usepackage{amssymb} %for black triangular bullet

% ------------
% Toggles 
% -----------

\newtoggle{ja}
\newtoggle{en}
\togglefalse{ja}
\toggletrue{en}

\newtoggle{photo}
\toggletrue{photo}


\newtoggle{long}
\togglefalse{long}


% change the margins to 2 inches all round
\geometry{top=1.75cm, bottom=-.6cm, left=1.5cm, right=1.5cm} 

% -----------------
%	Color 
% -----------------


\definecolor{col1}{RGB}{185,185,185}

\definecolor{color2}{rgb}{0.55,0.55,0.55}% Chose your color here.

% ---------------
%   Shapes
% ---------------

\renewcommand{\labelitemi}{$\blacktriangleright$} % Make list bullets triangles
	
	\newcommand{\majorsection}[1]
	{
		{\noindent\color{col1}{\rule{1\linewidth}{2mm}}
		\begin{tcolorbox}[width=7.5cm, height=0.9cm, colframe=col1, colback=col1, arc=6mm, sharp corners, rounded corners=southeast, enlarge top by=-3mm]
			\textcolor{black}{\textbf{#1}}
		\end{tcolorbox}}
	}

	\newcommand{\minorsection}[1]{
		\noindent {$\blacktriangleright$ \textbf{\large{#1}}}
	}

	\newcommand{\jobexperience}[5]{
		\noindent
			\begin{minipage}{0.5\linewidth}
				{\large{#1, #2 }} \\
				#4 - #5
			\end{minipage}
			{\large{\hfil \hfill \textbf{#3}}}
	}

	\newcommand{\project}[1]{\noindent{\large{#1}} \\ }
	
	
	
	
	% -------------
	%   Languages
	% --------------
	
	% Multi language text - this has to be one line or it generates extra whitespace
	\newcommand{\mlt}[2]{\iftoggle{en}{#1}{}\iftoggle{ja}{\begin{CJK}{UTF8}{maru}#2\end{CJK}}{}}
	
	
	% --------
	%  Icons 
	% --------
	
	\newcommand*{\marvosymbol}[1]{{\fontfamily{mvs}\fontencoding{U}\fontseries{m}\fontshape{n}\selectfont\char#1}}
	\definecolor{color2}{rgb}{0.55,0.55,0.55}% Chose your color here.
	
	\newcommand*{\fixedphonesymbol}    {\marvosymbol{84}~}
	\newcommand*{\emailsymbol}         {\marvosymbol{66}~}
	\newcommand*{\homepagesymbol}      {{\Large\marvosymbol{205}}~}
	\newcommand*{\linkedinsocialsymbol}{%
		\protect\raisebox{-0.165em}{%
			\protect\begin{tikzpicture}[x=0.08em, y=0.08em, xscale=0.25, yscale=-0.25, inner sep=0pt, outer sep=0pt]
			\protect\begin{scope}[cm={{0.60,0.0,0.0,0.60,(346.39,123.07)}}]
			\protect\path[fill=color2]
			(381,202) -- (434,202) .. controls (439,202) and (442,205) ..
			(442,210) -- (442,264) .. controls (442,268) and (439,272) ..
			(434,272) -- (381,272) .. controls (376,272) and (372,268) ..
			(372,264) -- (372,210) .. controls (372,205) and (376,202) ..
			(381,202) -- cycle;
			\protect\begin{scope}[xscale=0.98, yscale=1.02, fill=white]
			\protect\path[fill=white]
			(403,253) -- (403,224) -- (394,224) -- (394,253) --
			cycle(398,211) .. controls (397,211) and (395,212) ..
			(395,213) .. controls (394,213) and (393,215) ..
			(393,216) .. controls (393,217) and (394,218) ..
			(395,219) .. controls (395,220) and (397,220) ..
			(398,220) .. controls (400,220) and (401,220) ..
			(402,219) .. controls (402,218) and (403,217) ..
			(403,216) .. controls (403,215) and (402,213) ..
			(402,213) .. controls (401,212) and (400,211) ..
			(398,211) -- cycle;
			\protect\path[fill=white]
			(410,253) -- (419,253) --
			(419,236) .. controls (419,236) and (419,235) ..
			(419,235) .. controls (419,235) and (419,234) ..
			(419,234) .. controls (419,233) and (420,232) ..
			(421,232) .. controls (422,231) and (423,231) ..
			(424,231) .. controls (425,231) and (427,231) ..
			(427,232) .. controls (428,234) and (428,235) ..
			(428,237) -- (428,253) -- (437,253) --
			(437,236) .. controls (437,232) and (436,228) ..
			(434,226) .. controls (433,224) and (430,223) ..
			(427,223) .. controls (425,223) and (423,224) ..
			(421,225) .. controls (420,226) and (419,227) ..
			(418,228) -- (418,228) -- (417,224) --
			(410,224) .. controls (410,225) and (410,227) ..
			(410,228) .. controls (410,230) and (410,231) ..
			(410,233) -- cycle;
			\protect\end{scope}%
			\protect\end{scope}%
			\protect\end{tikzpicture}}%
		~}
	\newcommand*{\githubsocialsymbol}  {%
		\protect\raisebox{-0.15em}{%
			\protect\begin{tikzpicture}[x=0.08em, y=0.08em, xscale=0.25, yscale=-0.25, inner sep=0pt, outer sep=0pt]
			\protect\begin{scope}[shift={(507,387)}]
			\protect\path[fill=color2]
			(117, 60) .. controls (117, 71) and (108, 81) ..
			( 96, 81) .. controls ( 85, 81) and ( 75, 71) ..
			( 75, 60) .. controls ( 75, 48) and ( 85, 39) ..
			( 96, 39) .. controls (108, 39) and (117, 48) ..
			(117, 60) -- cycle;
			\protect\path[cm={{0.88,0.0,0.0,0.88,(11.10,6.89)}}, fill=white]
			(117, 60) .. controls (117, 71) and (108, 81) ..
			( 96, 81) .. controls ( 85, 81) and ( 75, 71) ..
			( 75, 60) .. controls ( 75, 48) and ( 85, 39) ..
			( 96, 39) .. controls (108, 39) and (117, 48) ..
			(117, 60) -- cycle;
			\protect\path[fill=color2, nonzero rule]
			(103, 45) .. controls (103, 45) and (101, 46) ..
			(101, 47) -- (100, 47) --
			( 99, 47) .. controls ( 99, 47) and ( 98, 47) ..
			( 97, 47) .. controls ( 94, 47) and ( 93, 47) ..
			( 92, 47) -- ( 92, 47) --
			( 91, 47) .. controls ( 90, 46) and ( 88, 45) ..
			( 88, 45) .. controls ( 88, 45) and ( 88, 45) ..
			( 87, 45) .. controls ( 87, 45) and ( 87, 45) ..
			( 87, 45) .. controls ( 86, 46) and ( 86, 48) ..
			( 86, 49) -- ( 87, 50) --
			( 86, 51) .. controls ( 85, 51) and ( 85, 52) ..
			( 85, 53) .. controls ( 85, 54) and ( 85, 57) ..
			( 85, 58) .. controls ( 85, 58) and ( 85, 58) ..
			( 82, 59) .. controls ( 79, 59) and ( 77, 59) ..
			( 77, 59) .. controls ( 77, 59) and ( 77, 59) ..
			( 78, 59) .. controls ( 80, 59) and ( 83, 59) ..
			( 85, 59) .. controls ( 85, 59) and ( 85, 59) ..
			( 85, 59) .. controls ( 86, 59) and ( 86, 59) ..
			( 86, 59) .. controls ( 86, 59) and ( 85, 59) ..
			( 84, 59) .. controls ( 82, 60) and ( 80, 60) ..
			( 79, 60) .. controls ( 78, 61) and ( 77, 61) ..
			( 77, 61) .. controls ( 77, 61) and ( 78, 61) ..
			( 79, 61) .. controls ( 81, 60) and ( 83, 60) ..
			( 85, 60) .. controls ( 86, 60) and ( 86, 60) ..
			( 86, 60) .. controls ( 86, 60) and ( 87, 61) ..
			( 88, 62) .. controls ( 89, 63) and ( 90, 63) ..
			( 92, 63) .. controls ( 92, 63) and ( 93, 64) ..
			( 93, 64) .. controls ( 93, 64) and ( 93, 64) ..
			( 93, 64) .. controls ( 92, 64) and ( 92, 65) ..
			( 92, 65) .. controls ( 92, 66) and ( 90, 66) ..
			( 89, 66) .. controls ( 88, 66) and ( 88, 66) ..
			( 87, 65) .. controls ( 87, 64) and ( 86, 63) ..
			( 86, 63) .. controls ( 85, 63) and ( 84, 63) ..
			( 84, 63) .. controls ( 84, 63) and ( 84, 63) ..
			( 84, 63) .. controls ( 85, 64) and ( 86, 65) ..
			( 86, 66) .. controls ( 87, 67) and ( 87, 68) ..
			( 88, 68) .. controls ( 89, 68) and ( 89, 68) ..
			( 90, 68) -- ( 92, 68) -- ( 92, 70) -- ( 92, 72) --
			( 91, 72) .. controls ( 91, 72) and ( 91, 73) ..
			( 91, 73) .. controls ( 90, 73) and ( 90, 73) ..
			( 91, 73) .. controls ( 92, 73) and ( 92, 73) ..
			( 92, 73) .. controls ( 93, 73) and ( 93, 73) ..
			( 93, 70) .. controls ( 93, 67) and ( 93, 67) ..
			( 94, 66) -- ( 94, 66) --
			( 94, 69) .. controls ( 94, 71) and ( 94, 73) ..
			( 94, 73) .. controls ( 94, 73) and ( 94, 73) ..
			( 93, 74) .. controls ( 93, 74) and ( 93, 74) ..
			( 93, 74) .. controls ( 93, 74) and ( 93, 74) ..
			( 94, 74) .. controls ( 94, 74) and ( 95, 74) ..
			( 96, 73) .. controls ( 96, 72) and ( 96, 71) ..
			( 96, 68) -- ( 96, 66) -- ( 96, 66) --
			( 96, 69) .. controls ( 96, 72) and ( 96, 72) ..
			( 97, 73) .. controls ( 97, 74) and ( 99, 74) ..
			( 99, 74) .. controls ( 99, 74) and ( 99, 74) ..
			( 99, 73) .. controls ( 99, 73) and ( 98, 73) ..
			( 98, 72) .. controls ( 98, 72) and ( 98, 66) ..
			( 98, 66) .. controls ( 98, 66) and ( 99, 66) ..
			( 99, 66) .. controls ( 99, 67) and ( 99, 67) ..
			( 99, 69) .. controls ( 99, 71) and ( 99, 72) ..
			( 99, 72) .. controls ( 99, 73) and (100, 73) ..
			(100, 73) .. controls (101, 73) and (101, 73) ..
			(101, 73) .. controls (102, 73) and (102, 73) ..
			(102, 73) .. controls (101, 72) and (101, 72) ..
			(101, 69) .. controls (101, 66) and (101, 65) ..
			(100, 65) .. controls (100, 64) and (100, 64) ..
			(100, 64) -- ( 99, 64) --
			(100, 63) .. controls (101, 63) and (102, 63) ..
			(103, 63) .. controls (104, 62) and (106, 61) ..
			(106, 60) -- (106, 60) --
			(107, 60) .. controls (109, 60) and (113, 60) ..
			(115, 61) .. controls (115, 61) and (115, 61) ..
			(115, 61) .. controls (115, 60) and (111, 60) ..
			(108, 59) .. controls (107, 59) and (107, 59) ..
			(107, 59) .. controls (107, 59) and (107, 59) ..
			(107, 59) -- (107, 59) --
			(108, 59) .. controls (110, 59) and (112, 59) ..
			(114, 59) .. controls (115, 59) and (115, 59) ..
			(115, 59) .. controls (115, 59) and (112, 59) ..
			(109, 59) .. controls (108, 58) and (107, 58) ..
			(107, 58) .. controls (107, 58) and (107, 58) ..
			(107, 58) .. controls (107, 57) and (107, 56) ..
			(107, 55) .. controls (107, 53) and (107, 53) ..
			(107, 53) .. controls (107, 52) and (106, 51) ..
			(106, 50) -- (105, 50) --
			(105, 48) .. controls (105, 47) and (105, 46) ..
			(105, 46) -- (105, 45) --
			(104, 45) .. controls (104, 45) and (104, 45) ..
			(103, 45) -- cycle;
			\protect\end{scope}%
			\protect\end{tikzpicture}}%
		~}
	
	
	
	
	% ---------
	% Content
	% --------
	
	\newcommand{\experience}{\mlt{Experience}{職務経歴}}
	\newcommand{\skillsandlanguages}{\mlt{Skills \& Languages}{技術・言語}}
	\newcommand{\projects}{\mlt{Projects}{個人開発}}
	\newcommand{\awards}{\mlt{Awards}{受賞歴}}
	\newcommand{\education}{\mlt{Education}{学歴}}
	
	
	
	\newcommand{\jobexpA}{
		\jobexperience{\mlt{Software Engineer}{システムエンジニア}}
		{\mlt{New Product Development}{新商品開発部}}
		{eBay}
		{\mlt{November 2016}{2016年11月}}
		{\mlt{Present}{現在}}
		\begin{itemize}[noitemsep]
			\item \mlt{Developed from scratch, wrote tests for, and then took sole ownership of the Scala distributed scheduling service that powers eBay ShopBot's proactive messaging}
			{eBay ShopBotの自発的なメッセージを送信する分散スケジューラサービスとその自動テストをScalaでゼロから開発}
			\item \mlt{Implemented a bootstrapping NLP process to extract informative noun/adjective pairs from reviews, using Python and Spacy (based on “RevMiner" paper)}
			{PythonでSpacyを利用し、レビューから有用な名詞と形容詞のペアを抽出するブートストラップ自然言語処理を実装　（“RevMiner”という論文に基づき）}
			\item \mlt{Developed a Ruby on Rails web service that allowed non-technical users to customize and schedule proactive messages from ShopBot to users }
			{Ruby on Railsを利用し、非技術系社員が顧客へのメッセージをカスタマイズしたりスケジュール送信できるウェブアプリケーションをゼロから開発}
		\end{itemize}
	}

	\newcommand{\jobexpB}{
		\jobexperience{\mlt{Software Engineer}{システムエンジニア}}
		{\mlt{Global Shipping Program}{国際出荷管理部}}
		{eBay}
		{\mlt{September 2015}{2015年9月}}
		{\mlt{November 2016}{2016年11月}}
		\begin{itemize}[noitemsep]
			\item \mlt{Maintained and developed new features in Java/Spring services at scale (several million requests per hour)}
			{JavaとSpringで大規模（毎時数百万のリクエスト )のウェブサービスにおける保守と新機能の開発}
			\item \mlt{Produced tests for both new features and old untested features using JUnit and Mockito}
			{JUnitとMockitoを利用し、新機能とテストのない既存機能の自動テストを開発}
			\item \mlt{Drove an effort to automate excessive manual operations work, saving the team 10s of hours of work per week }
			{インフラやデータ整理などの手作業を自動化する取り組みを率い、チームの一週間当たりの手作業時間を数十時間減少させる事に成功}
			\item \mlt{Rearchitected the pipeline used to import shipping charge data from shipping partners, increasing the accuracy of shipping prices on eBay's search results page by up to 40\%}
			{提携している運送会社からデータをインポートするパイプラインを再構築し、eBayの検索結果ページに載る配送料の精度を最高で40％改善}
		\end{itemize}
	}

	\newcommand{\jobexpC}{
	\jobexperience{\mlt{Intern}{インターン}}
	{\mlt{Global Data Infrastructure}{国際データインフラ部}}
	{eBay}
	{\mlt{June 2013}{2013年6月}}
	{\mlt{September 2014}{2014年9月}}
	\begin{itemize}[noitemsep]
		\item \mlt{Took ownership of and greatly expanded the functionality of a Ruby on Rails application serving eBay's data science teams, automating common support requests}
		{データサイエンス部からよく来るサポートリクエストを自動化するRuby on Railsウェブアプリケーションに取り組み、多数の新機能を実装}
		\item \mlt{Wrote or improved Ruby scripts to help with common ops tasks}
		{よくあるシステム運用の作業に役立つスクリプトを書き、または改善}
		\item \mlt{Performed troubleshooting and ops work in a Linux environment}
		{Linuxでシステム運用・保守}
	\end{itemize}
	}

	\newcommand{\projectA}{
		\project{Parasite}
		\mlt{A mod for StarCraft 2, which at peak averaged 2 million plays per week.  Written in a combination of a native GUI language and Galaxy, a C-like language. I was responsible for the architecture, design, and vast majority of the code written, eventually onboarding another developer and two community managers.}
		{一週間当たりにプレイされた回数が2百万回に達したStarCraft 2のMODである。専用のGUIプログラミング言語とGalaxyというCのようなプログラミング言語で開発を行った。一人で設計とデザインを考え出し、コードの大部分も一人で書いた。後でもう一人の開発者と二人のコミュニティ管理者でチームを結成した。}
	}

	\newcommand{\projectB}{
		\project{Pytext}
		\mlt{A desktop application written in Python which wraps communication with an email server and use of email to SMS gateways to allow users to participate in SMS conversations without the need for a phone number. }
		{ユーザーの入力したメッセージをメールとしてSMSゲートウェイに送信する事により、電話番号なしでSMS会話に参加する事を可能にするデスクトップアプリケーションである。一人でPythonで開発した。}
	}
	
	\begin{document}
		
		
		% ------
		% Header
		% ------
		\noindent
		\begin{minipage}{.3\textwidth}
			{\huge{\textbf{Joshua Tanner}}} \\
			\mlt{Software Engineer}{システムエンジニア}
		\end{minipage}% This must go next to `\end{minipage}`
		\hfill
		\begin{minipage}{.3\textwidth}
			\fixedphonesymbol 1-510-326-3431 \\
			\emailsymbol joshuabtanner@gmail.com \\
			\githubsocialsymbol github.com/Mindful \\
			\linkedinsocialsymbol linkedin.com/in/joshuatanner2/ \\
		\end{minipage}
		\iftoggle{photo}{
			\begin{minipage}{.3\textwidth}
				\begin{flushright}
					\medskip
					\fbox{\includegraphics[width=2.75cm, height=2.75cm]{photo.jpg}}
					\medskip
				\end{flushright}
			\end{minipage}
		}{}
		
		% ------
		% Core Resume
		% -------
		
		\iftoggle{long}{ % --------------------------- LONG -----------------------------------
			\majorsection{\experience}
				\jobexpA
				\jobexpB
				\jobexpC
				
			\majorsection{\skillsandlanguages}
			
			\begin{minipage}{0.33\textwidth}
				\begin{center}
					\minorsection{Programming Languages} \\
					\begin{tabular}{l l l}
						Scala &  Python & Java  \\
						 Ruby& Javascript & C++
					\end{tabular}
				\end{center}
			\end{minipage}
			\begin{minipage}{0.3\textwidth}
				\begin{center}
					\minorsection{Frameworks}
					\begin{tabular}{l l}
						 Play2 (Scala) & Ruby on Rails  \\
						 Spacy & Falcon 
					\end{tabular}
				\end{center}
			\end{minipage}
			\begin{minipage}{0.3\textwidth}
				\begin{center}
									\minorsection{Languages}
									\begin{tabular}{l l}
										\mlt{English}{英語} & \mlt{Native Speaker}{母国語} \\
										\mlt{Japanese}{日本語} & \mlt{Fluent (JLPT N1)}{ビジネスレベル・日本語能力試験N1合格} 
									\end{tabular}
				\end{center}
			\end{minipage}
			
			\majorsection{\projects}
			
			\begin{itemize}[noitemsep]
				\item \projectA
				\item \projectB
			\end{itemize}
				
			\majorsection{\awards}
			
			\majorsection{\education}
		}{ %----------------------------- SHORT ---------------------------------------
		
			\begin{minipage}{0.25\textwidth}
				
				\minorsection{\skillsandlanguages}
				
				\textbf{Programming Languages}
				\begin{tabular}{l l}
					Scala &  Python  \\ 
					Java  & Ruby  \\ 
					Javascript & C++
				\end{tabular}
			
				\textbf{Frameworks}
				\begin{tabular}{l l}
					Play2 (Scala) & Ruby on Rails  \\
					Spacy & Falcon 
				\end{tabular}
			
				\textbf{Languages}
				\begin{tabular}{l l}
					\mlt{English}{英語} & \mlt{Native Speaker}{母国語} \\
					\mlt{Japanese}{日本語} & \mlt{Fluent (JLPT N1)}{ビジネスレベル・日本語能力試験N1合格} 
				\end{tabular}
				
				
				\minorsection{\education}
				
			\end{minipage}
			\begin{minipage}{0.8\textwidth}
				\majorsection{\experience}
				\jobexpA
				\jobexpB
				\jobexpC
				
				\majorsection{\projects}
				\projectA
				\projectB
				
				\majorsection{\awards}
			\end{minipage}
		
		}
		
		
		% Summary? Skills/Languages as one section with them spread out horizontally?
		% Why does "的" not render properly? :( See: 自発的
		% Do I eventually want a short and long version? Can I define these things as variables and use some but not all in multiple places?
		
	\end{document}